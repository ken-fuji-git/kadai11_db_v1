# ①課題名
ペンギン会議

## ②課題内容（どんな作品か）
- ⾃分を褒めるための振り返りアプリのMVP版です。
- 今⽇がんばった事について、ペンギン達を通じて⼀緒に振り返ります。
- 今日の頑張りを入力→AIからのチャット形式での返答までを実装しました。

## ③アプリのデプロイURL
- ログイン画面
https://fujiwarakenta.sakura.ne.jp/kadai11_db_v1/login.php

~~~
【ログイン情報】

▼管理者（更新削除権限あり）
ログインID：test1
パスワード：test1

~~~

## 使い方
- ログインします。
- 今⽇⼀⽇がんばった内容をテキストに打ち込む
- 「会議を始める」ボタンを押すとペンギン達が会議を始めるので眺めるだけです。
- ペンギンの動きを入れたかったのですが、実装が間に合いませんでした。

## 工夫した点・こだわった点
- ログイン情報については.envファイルを使って管理する方法を試してみました。

## 機能構成
~~~
ユーザー
→ login.php（ログイン画面）
→ login_act.php（ID/パスワード認証）
→ 成功時 index.php（会議画面） / 失敗時 login.php に戻る

index.php（app.js）の「会議を始める」
→ save_diary.php（日記保存）
→ MySQL diaries テーブル

続けて
→ generate_chat.php（会話生成）
→ MySQL diaries から日記取得
→ AiService.php 経由で OpenAI API 呼び出し
→ 生成会話を MySQL chat_logs に保存
→ 生成結果を app.js が受け取り画面表示

補助機能
DB接続: Database.php / funcs.php
環境変数読み込み: Env.php（.env.local / .env.sakura 自動切替）
セッション管理: login_act.php / funcs.php::sschk() / logout.php
~~~

## AIプロンプト

~~~
$systemPrompt = "
あなたは「肯定するペンギンたちの会議」の脚本家です。
ユーザーの日記（今日がんばったこと）に対して、10羽のペンギンが会議をし、ユーザーを褒め、励まし、愛着を感じさせる会話を作成してください。

【キャラクター設定】
1. ペンギン長老: 
   - 物知りだが、少し抜けている。おとぼけキャラ。
   - 語尾は「〜じゃ」「〜のう」。
   - ユーザーの行動を深く（時には深読みしすぎて）解釈する。

2. わんぱくペンギン: 
   - 元気いっぱい。単純。
   - 語尾は「〜だッ！」「〜だね！」。
   - とにかく褒める。すごいすごいと言う。

3. インテリペンギン:
   - 冷静で分析的。メガネをかけている（設定）。
   - 語尾は「〜ですね」「〜と思われます」。
   - 具体的な行動を褒める。

上記を参考に、残りの7羽のキャラクターを補完して会話を補ってください。

【シナリオ構成】
- 10羽がわらわらと集まり、ユーザーの日記について議論する。
- 議論はすべて肯定的（ポジティブ）。
- ユーザーが「失敗した」と書いても、「挑戦が素晴らしい」と変換する。
- 全体で6〜10ターン程度の会話。
- JSON形式で出力すること。

【出力フォーマット (JSON)】
[
   {\"speaker\": \"ペンギン長老\", \"message\": \"...\"},
   {\"speaker\": \"わんぱくペンギン\", \"message\": \"...\"},
   ...
]
";
~~~

## 企画書（v1）
https://fujiwarakenta.sakura.ne.jp/kadai11/cheer_animal_plan_v1.pdf

## 難しかった点・次回トライしたいこと（又は機能）
- コメントへの「いいね」機能の実装と、重み付け、会話の分岐実装
- ペンギンのビジュアルや動きの実装

## フリー項目（感想、シェアしたいこと等なんでも）
遅くなって申し訳ありませんでした！
レビュー会は毎週の楽しみでした。
初回は聞く専でしたが、その後皆勤できたのでとても勉強になりました。
スタッフの皆様ありがとうございました。引き続き勉強に励みます！！